syntax = "proto3";
package pocket.gateway;

option go_package = "github.com/pokt-network/poktroll/x/gateway/types";
option (gogoproto.stable_marshaler_all) = true;

import "cosmos_proto/cosmos.proto";
import "gogoproto/gogo.proto";

import "pocket/gateway/types.proto";

// EventGatewayStaked is emitted when a gateway is staked or up-staked.
message EventGatewayStaked {
  // Next index: 5

  // Gateway gateway = 1 [(gogoproto.jsontag) = "gateway"];
  reserved 1;

  // The end height of the session in which gateway was staked.
  int64 session_end_height = 2 [(gogoproto.jsontag) = "session_end_height"];

  // The address of the gateway that has been staked.
  string gateway_address = 3 [(cosmos_proto.scalar) = "cosmos.AddressString"];

  // The amount of stake.
  string stake = 4 [(gogoproto.jsontag) = "stake"];
}

// EventGatewayUnbondingBegin is emitted when a gateway begins unbonding.
// It is triggered by the commitment of an unstake gateway message.
// This event signals that a gateway has begun unbonding.
// The unbonding period is determined by the shared param gateway_unbonding_period_sessions.
message EventGatewayUnbondingBegin {
  // Next index: 6

  // pocket.gateway.Gateway gateway = 1 [(gogoproto.jsontag) = "gateway"];
  reserved 1;

  // The end height of the session in which the unbonding began.
  int64 session_end_height = 3 [(gogoproto.jsontag) = "session_end_height"];

  // The height at which gateway unbonding will end.
  int64 unbonding_end_height = 4 [(gogoproto.jsontag) = "unbonding_height"];

  // The address of the gateway that began unbonding.
  string gateway_address = 5 [(cosmos_proto.scalar) = "cosmos.AddressString"];
}

// EventGatewayUnbondingEnd is emitted when a gateway has completed unbonding.
// The unbonding period is determined by the shared param gateway_unbonding_period_sessions.
message EventGatewayUnbondingEnd {
  // Next index: 6

  // pocket.gateway.Gateway gateway = 1 [(gogoproto.jsontag) = "gateway"];
  reserved 1;

  // The end height of the session in which the unbonding began.
  int64 session_end_height = 3 [(gogoproto.jsontag) = "session_end_height"];

  // The height at which gateway unbonding will end.
  int64 unbonding_end_height = 4 [(gogoproto.jsontag) = "unbonding_height"];

  // The address of the gateway that completed unbonding.
  string gateway_address = 5 [(cosmos_proto.scalar) = "cosmos.AddressString"];
}

// EventGatewayUnbondingCanceled is emitted when a gateway which was unbonding
// successfully (re-)stakes before the unbonding period has elapsed.
// An EventGatewayStaked event will also be emitted immediately after this event.
message EventGatewayUnbondingCanceled {
  // Next index: 4

  // pocket.gateway.Gateway gateway = 1 [(gogoproto.jsontag) = "gateway"];
  reserved 1;

  // The end height of the session in which the unbonding was canceled.
  int64 session_end_height = 2 [(gogoproto.jsontag) = "session_end_height"];
  // The address of the gateway that canceled unbonding.
  string gateway_address = 3 [(cosmos_proto.scalar) = "cosmos.AddressString"];
}