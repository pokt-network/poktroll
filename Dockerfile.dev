FROM golang:1.20 as base

RUN apt update && \
    apt-get install -y \
        ca-certificates \
        curl jq make

# enable faster module downloading.
ENV GOPROXY https://proxy.golang.org

COPY . /poktroll

WORKDIR /poktroll

RUN mv /poktroll/bin/pocketd /usr/bin/pocketd

EXPOSE 8545
EXPOSE 8546

ENTRYPOINT ["ignite"]