FROM ignitehq/cli:v0.27.1 AS ignite_image
FROM golang:1.20 as base

COPY --from=ignite_image /usr/bin/ignite /usr/bin/ignite

RUN apt update && \
    apt-get install -y \
        build-essential \
        ca-certificates \
        curl jq make

# enable faster module downloading.
ENV GOPROXY https://proxy.golang.org

COPY . /poktroll

WORKDIR /poktroll

RUN ignite chain build
RUN ls -la