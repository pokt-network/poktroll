FROM golang:1.20 as base

RUN apt update && \
    apt-get install -y \
        ca-certificates \
        curl jq make

# enable faster module downloading.
ENV GOPROXY https://proxy.golang.org

COPY . /poktroll

WORKDIR /poktroll

# TODO_IN_THIS_PR: remove, this is me trying to find the issue
RUN ls -la /poktroll
RUN ls -la /poktroll/bin

RUN mv /poktroll/bin/pocketd /usr/bin/pocketd
